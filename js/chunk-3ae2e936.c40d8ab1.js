(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ae2e936"],{"1f7d":function(t,e,n){"use strict";n("86c0")},3073:function(t,e,n){},"54ca":function(t,e,n){"use strict";n("3073")},"5c5a":function(t,e,n){"use strict";n.d(e,"f",(function(){return r})),n.d(e,"h",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return i})),n.d(e,"g",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return f}));n("af60"),n("cc16"),n("a8aa"),n("7d72"),n("c12e"),n("f775"),n("b66b"),n("48d1"),n("5faa"),n("ec76");function r(t){var e="",n=[];return n=t.split("*"),n.map((function(t,e){n[e]=t.trim()})),n.length>=6&&(e=n[5]),e}function a(t){var e=0,n=[];return n=t.split("*"),n.map((function(t,e){n[e]=t.trim()})),n.length>=6&&(e=Number(n[1])),e}function s(t){var e="",n=[];return n=t.split("*"),n.map((function(t,e){n[e]=t.trim()})),n.length>=6&&(e=n[0]),e}function i(t){var e=t;return-1!=t.indexOf("@")&&t.split("@").length>=2&&(e=t.split("@")[1]),e}function u(t){for(var e="",n=t.split("*"),r=0;r<n.length;r++)n[r]=n[r].trim();return n.length>=6&&(e=n[0].replace(/\+/g,"").replace(/-/g,"")),e}var o=n("31d9");function c(t,e,n,r){return"X3S"==t||"X2S"==t?(o(r).endsWith("T")||(r=n%2==1?1:2,2==r&&(n-=1)),"L".concat(e,"-").concat(n,"-").concat(r)):"L".concat(e,"-").concat(n,"-").concat(r)}function l(t,e){var n=[],r=t.split("-"),a=0;return"AX501"==e?["E"+o(r[0].replace("L","")).padLeft(2,"0").s+o(r[1]).padLeft(2,"0").s]:e.startsWith("NPM")?["POS"+o(r[1]).padLeft(3,"0").s+"$"+r[2]]:(o(r[2]).endsWith("T")?n.push("POS001$"+r[2]):(a=parseInt(r[1]),"2"==r[2]&&(n.push("POS"+o(a+"").padLeft(3,"0").s+"$2"),a+=1),n.push("POS"+o(a+"").padLeft(3,"0").s+"$1")),n)}var f={ERR_LOGINFAILED:"200-登录失败",ERR_NOTNEEDVERIFY:"301-该料站不需要验料",ERR_NOTRACKINFO:"302-请扫描料站条码",ERR_NODIVISIONINFO:"303-请选择料槽号",ERR_NOCMPINFO:"304-请扫描物料",ERR_STATIONNOTINLINE:"305-机台不属于产线",ERR_SCANCOMPONENT:"306-请扫描物料",ERR_TEARDOWNFAILED:"307-卸下出错"}},"5faa":function(t,e,n){"use strict";var r=n("b591"),a=n("f2e6").f,s=n("ad3e"),i=n("ef79"),u=n("31c4"),o=n("7518"),c=n("6e2a"),l="".startsWith,f=Math.min,d=o("startsWith"),p=!c&&!d&&!!function(){var t=a(String.prototype,"startsWith");return t&&!t.writable}();r({target:"String",proto:!0,forced:!p&&!d},{startsWith:function(t){var e=String(u(this));i(t);var n=s(f(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return l?l.call(e,r,n):e.slice(n,n+r.length)===r}})},"86c0":function(t,e,n){},a8aa:function(t,e,n){"use strict";var r=n("b591"),a=n("7b23").map,s=n("af5e"),i=n("4b7d"),u=s("map"),o=i("map");r({target:"Array",proto:!0,forced:!u||!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},b7bd:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{staticClass:"cellAll",scopedSlots:t._u([{key:"title",fn:function(){return[n("div",{staticClass:"custom-title"},[t._v(t._s(t.title))]),n("van-field",{staticClass:"filed",attrs:{autosize:"",type:t.type,clearable:""},on:{input:t.onInput,focus:t.fieldFocus,blur:t.fieldBlur},scopedSlots:t._u([{key:"right-icon",fn:function(){return[n("van-icon",{attrs:{name:"scan",size:"20",color:"#4284f4"}})]},proxy:!0}]),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]},proxy:!0}])})},a=[],s={props:{title:{type:String,require:!1,default:"标题"},value:{require:!1,default:""},type:{type:String,require:!1,default:"textarea"}},methods:{onInput:function(t){this.value=t,this.$emit("update:value",t)},GetVal:function(){return this.value},fieldBlur:function(){window.scroll(0,this.FoucusS),window.onresize=function(){}},fieldFocus:function(){this.FoucusS=document.documentElement.scrollTop-40,window.onresize=function(){return function(){var t=document.body.clientHeight;window.scroll(0,t)}()}}}},i=s,u=(n("54ca"),n("5d22")),o=Object(u["a"])(i,r,a,!1,null,null,null);e["a"]=o.exports},ee63:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Page",{attrs:{title:t.$t("物料下线"),msgs:"true",showMsg:t.showMsg}},[n("div",{staticClass:"offlineTableBox"},[t._v(" "+t._s(t.$t("选择类型"))+" "),n("van-radio-group",{attrs:{"icon-size":"14px"},model:{value:t.offlineType,callback:function(e){t.offlineType=e},expression:"offlineType"}},[n("van-radio",{attrs:{name:"1"}},[t._v(t._s(t.$t("单盘下线")))]),n("van-radio",{attrs:{name:"2"}},[t._v(t._s(t.$t("批量下线")))])],1)],1),n("ScanInput",{directives:[{name:"show",rawName:"v-show",value:t.isShowScan,expression:"isShowScan"}],attrs:{label:t.$t("条码")},on:{submit:t.m_scanner_OnScannerReaded}}),n("InputCell",{attrs:{title:t.$t("条码"),value:t.barcode},on:{"update:value":function(e){t.barcode=e}}}),n("van-button",{staticClass:"BtnButton",attrs:{type:"info"},on:{click:function(e){return t.SubmitTableOfflineVerifyData()}}},[t._v(t._s(t.$t("确认")))])],1)},a=[],s=(n("cc16"),n("c12e"),n("6a61"),n("2e91")),i=n("9973"),u=n("6168"),o=n("c9c2"),c=n("1c01"),l=n("5c5a"),f=n("b7bd"),d={components:{Page:i["a"],ScanInput:u["a"],InputCell:f["a"]},data:function(){return{isShowScan:!1,showMsg:"",offlineType:"1",barcode:"",LocationIndex:0,stationId:0,reelId:"",CurrentOnlinePart:null}},methods:{showMessage:function(t){this.showMsg=t},m_scanner_OnScannerReaded:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(e.barcode=t,"2"!=e.offlineType){n.next=22;break}if(r=/(.*)\$L(\d)/i,r.test(t)){n.next=8;break}return e.showMessage(e.$t("机台条码格式不正确")),n.abrupt("return");case 8:return a=r.exec(t),s=0,s=parseInt(a[2]),n.next=13,o["f"]({EStationCode:a[1]});case 13:if(i=n.sent,i&&i.Items&&0!=i.Items.length){n.next=17;break}return e.showMessage("Unknwon station code!"),n.abrupt("return");case 17:e.LocationIndex=s,e.stationId=i.Items[0].Id,e.showMessage(e.$t("扫描到机台条码：")+t),n.next=32;break;case 22:return e.reelId=t,-1!=t.indexOf("*")&&(e.reelId=Object(l["f"])(t)),n.next=26,c["h"]({EReelId:e.reelId});case 26:if(u=n.sent,null!=u&&0!=u.Items.length){n.next=30;break}return e.showMessage(e.$t("未找到在线物料")),n.abrupt("return");case 30:e.CurrentOnlinePart=u.Items[0],e.showMessage(e.$t("扫描到物料条码：")+e.reelId);case 32:case"end":return n.stop()}}),n)})))()},SubmitTableOfflineVerifyData:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("2"!=t.offlineType){e.next=10;break}if(0!=t.stationId){e.next=4;break}return t.showMessage(t.$t("请扫描机台条码")),e.abrupt("return");case 4:return e.next=6,c["i"](t.stationId,t.LocationIndex);case 6:n=e.sent,n&&(r=t.$t("下线成功"),t.showMessage(r),t.stationId=0,t.LocationIndex=0,t.barcode=""),e.next=19;break;case 10:if(t.CurrentOnlinePart){e.next=13;break}return t.showMessage(t.$t("请扫描物料条码!")),e.abrupt("return");case 13:return a=[],a.push(t.reelId),e.next=17,c["j"](a);case 17:s=e.sent,s&&(i=t.CurrentOnlinePart.OnlineLocation+t.$t("下线成功"),t.showMessage(i),t.CurrentOnlinePart=null,t.reelId="",t.barcode="");case 19:case"end":return e.stop()}}),e)})))()}}},p=d,h=(n("1f7d"),n("5d22")),b=Object(h["a"])(p,r,a,!1,null,null,null);e["default"]=b.exports}}]);