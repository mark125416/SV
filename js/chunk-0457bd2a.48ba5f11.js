(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0457bd2a"],{"1f7d":function(e,t,n){"use strict";n("86c0")},3073:function(e,t,n){},"54ca":function(e,t,n){"use strict";n("3073")},"5c5a":function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"g",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}));n("4914"),n("95e8"),n("b34d"),n("a5bc"),n("b6b5"),n("0482"),n("31d6"),n("f845"),n("247c");function r(e){var t="",n=[];return n=e.split("/"),n.map((function(e,t){n[t]=e.trim()})),n.length>=6&&(-1!=n[5].indexOf("X")&&(n[5]=n[5].replace("X","")),t=n[5]),t}function a(e){var t=0,n=[];if(n=e.split("/"),n.map((function(e,t){n[t]=e.trim()})),n.length>=6){var r=n[2];-1!=r.indexOf("Q")&&(r=r.replace("Q","")),t=Number(r)}return t}function s(e){var t="",n=[];return n=e.split("*"),n.map((function(e,t){n[t]=e.trim()})),n.length>=6&&(-1!=n[1].indexOf("3OS")&&(n[1]=n[1].replace("3OS","")),t=n[1]),t}function i(e){for(var t="",n=e.split("*"),r=0;r<n.length;r++)n[r]=n[r].trim();return n.length>=6&&(t=n[0].replace(/\+/g,"").replace(/-/g,"")),t}var o=n("31d9");function u(e,t,n,r){return"X3S"==e||"X2S"==e?(o(r).endsWith("T")||(r=n%2==1?1:2,2==r&&(n-=1)),"L".concat(t,"-").concat(n,"-").concat(r)):"L".concat(t,"-").concat(n,"-").concat(r)}function c(e,t){var n=[],r=e.split("-"),a=0;return"AX501"==t?["E"+o(r[0].replace("L","")).padLeft(2,"0").s+o(r[1]).padLeft(2,"0").s]:t.startsWith("NPM")?["POS"+o(r[1]).padLeft(3,"0").s+"$"+r[2]]:(o(r[2]).endsWith("T")?n.push("POS001$"+r[2]):(a=parseInt(r[1]),"2"==r[2]&&(n.push("POS"+o(a+"").padLeft(3,"0").s+"$2"),a+=1),n.push("POS"+o(a+"").padLeft(3,"0").s+"$1")),n)}var l={ERR_LOGINFAILED:"200-登录失败",ERR_NOTNEEDVERIFY:"301-该料站不需要验料",ERR_NOTRACKINFO:"302-请扫描料站条码",ERR_NODIVISIONINFO:"303-请选择料槽号",ERR_NOCMPINFO:"304-请扫描物料",ERR_STATIONNOTINLINE:"305-机台不属于产线",ERR_SCANCOMPONENT:"306-请扫描物料",ERR_TEARDOWNFAILED:"307-卸下出错"}},"86c0":function(e,t,n){},"95e8":function(e,t,n){"use strict";var r=n("4292"),a=n("0a86").map,s=n("b9d5"),i=s("map");r({target:"Array",proto:!0,forced:!i},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},b7bd:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-cell",{staticClass:"cellAll",scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"custom-title"},[e._v(e._s(e.title))]),n("van-field",{staticClass:"filed",attrs:{autosize:"",type:e.type,clearable:""},on:{input:e.onInput,focus:e.fieldFocus,blur:e.fieldBlur},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-icon",{attrs:{name:"scan",size:"20",color:"#4284f4"}})]},proxy:!0}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]},proxy:!0}])})},a=[],s={props:{title:{type:String,require:!1,default:"标题"},value:{require:!1,default:""},type:{type:String,require:!1,default:"textarea"}},methods:{onInput:function(e){this.value=e,this.$emit("update:value",e)},GetVal:function(){return this.value},fieldBlur:function(){window.scroll(0,this.FoucusS),window.onresize=function(){}},fieldFocus:function(){this.FoucusS=document.documentElement.scrollTop-40,window.onresize=function(){return function(){var e=document.body.clientHeight;window.scroll(0,e)}()}}}},i=s,o=(n("54ca"),n("5d22")),u=Object(o["a"])(i,r,a,!1,null,null,null);t["a"]=u.exports},ee63:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:e.$t("物料下线"),msgs:"true",showMsg:e.showMsg}},[n("div",{staticClass:"offlineTableBox"},[e._v(" "+e._s(e.$t("选择类型"))+" "),n("van-radio-group",{attrs:{"icon-size":"14px"},model:{value:e.offlineType,callback:function(t){e.offlineType=t},expression:"offlineType"}},[n("van-radio",{attrs:{name:"1"}},[e._v(e._s(e.$t("单盘下线")))]),n("van-radio",{attrs:{name:"2"}},[e._v(e._s(e.$t("批量下线")))])],1)],1),n("ScanInput",{directives:[{name:"show",rawName:"v-show",value:e.isShowScan,expression:"isShowScan"}],attrs:{label:e.$t("条码")},on:{submit:e.m_scanner_OnScannerReaded}}),n("InputCell",{attrs:{title:e.$t("条码"),value:e.barcode},on:{"update:value":function(t){e.barcode=t}}}),n("van-button",{staticClass:"BtnButton",attrs:{type:"info"},on:{click:function(t){return e.SubmitTableOfflineVerifyData()}}},[e._v(e._s(e.$t("确认")))])],1)},a=[],s=(n("a5bc"),n("6a61"),n("9ad1")),i=n("9973"),o=n("6168"),u=n("c9c2"),c=n("1c01"),l=n("5c5a"),f=n("b7bd"),d={components:{Page:i["a"],ScanInput:o["a"],InputCell:f["a"]},data:function(){return{isShowScan:!1,showMsg:"",offlineType:"1",barcode:"",LocationIndex:0,stationId:0,reelId:"",CurrentOnlinePart:null}},methods:{showMessage:function(e){this.showMsg=e},m_scanner_OnScannerReaded:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,s,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(t.barcode=e,"2"!=t.offlineType){n.next=22;break}if(r=/(.*)\$L(\d)/i,r.test(e)){n.next=8;break}return t.showMessage(t.$t("机台条码格式不正确")),n.abrupt("return");case 8:return a=r.exec(e),s=0,s=parseInt(a[2]),n.next=13,u["f"]({EStationCode:a[1]});case 13:if(i=n.sent,i&&i.Items&&0!=i.Items.length){n.next=17;break}return t.showMessage("Unknwon station code!"),n.abrupt("return");case 17:t.LocationIndex=s,t.stationId=i.Items[0].Id,t.showMessage(t.$t("扫描到机台条码：")+e),n.next=32;break;case 22:return t.reelId=e,-1!=e.indexOf("*")&&(t.reelId=Object(l["e"])(e)),n.next=26,c["h"]({EReelId:t.reelId});case 26:if(o=n.sent,null!=o&&0!=o.Items.length){n.next=30;break}return t.showMessage(t.$t("未找到在线物料")),n.abrupt("return");case 30:t.CurrentOnlinePart=o.Items[0],t.showMessage(t.$t("扫描到物料条码：")+t.reelId);case 32:case"end":return n.stop()}}),n)})))()},SubmitTableOfflineVerifyData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("2"!=e.offlineType){t.next=10;break}if(0!=e.stationId){t.next=4;break}return e.showMessage(e.$t("请扫描机台条码")),t.abrupt("return");case 4:return t.next=6,c["i"](e.stationId,e.LocationIndex);case 6:n=t.sent,n&&(r=e.$t("下线成功"),e.showMessage(r),e.stationId=0,e.LocationIndex=0,e.barcode=""),t.next=19;break;case 10:if(e.CurrentOnlinePart){t.next=13;break}return e.showMessage(e.$t("请扫描物料条码!")),t.abrupt("return");case 13:return a=[],a.push(e.reelId),t.next=17,c["j"](a);case 17:s=t.sent,s&&(i=e.CurrentOnlinePart.OnlineLocation+e.$t("下线成功"),e.showMessage(i),e.CurrentOnlinePart=null,e.reelId="",e.barcode="");case 19:case"end":return t.stop()}}),t)})))()}}},p=d,h=(n("1f7d"),n("5d22")),b=Object(h["a"])(p,r,a,!1,null,null,null);t["default"]=b.exports},f845:function(e,t,n){"use strict";var r=n("4292"),a=n("016e").f,s=n("2730"),i=n("6ff7"),o=n("11a1"),u=n("8531"),c=n("0fee"),l="".startsWith,f=Math.min,d=u("startsWith"),p=!c&&!d&&!!function(){var e=a(String.prototype,"startsWith");return e&&!e.writable}();r({target:"String",proto:!0,forced:!p&&!d},{startsWith:function(e){var t=String(o(this));i(e);var n=s(f(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return l?l.call(t,r,n):t.slice(n,n+r.length)===r}})}}]);