(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef7f2fa6"],{2768:function(e,t,n){"use strict";n("3bdd")},3073:function(e,t,n){},"3bdd":function(e,t,n){},4176:function(e,t,n){"use strict";n("8234")},"521f":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.messages,expression:"messages"}],ref:"messageBox",staticClass:"lonelyMeg",attrs:{rows:"11",readonly:""},domProps:{value:e.messages},on:{input:function(t){t.target.composing||(e.messages=t.target.value)}}})},s=[],i=(n("425f"),{props:{showMsg:{type:String,require:!1,default:""}},data:function(){return{messages:"",count:0}},methods:{showMessage:function(e){if(null!=e&&""!=e&&void 0!=e){this.count>=50?(this.messages=" "+e+"\r\n",this.count=1):this.messages+=" "+e+"\r\n";var t=this;setTimeout((function(){t.$refs.messageBox.scrollTop=t.$refs.messageBox.scrollHeight})),this.count++}}},mounted:function(){var e="User: "+JSON.parse(localStorage.getItem("profile")).name;this.showMessage(e)},updated:function(){}}),r=i,u=n("5d22"),c=Object(u["a"])(r,a,s,!1,null,null,null);t["a"]=c.exports},"54ca":function(e,t,n){"use strict";n("3073")},8234:function(e,t,n){},"93d4":function(e,t,n){"use strict";n("a5ba")},a5ba:function(e,t,n){},a7d2:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Page",{attrs:{title:e.$t("物料盘点"),msgs:"false"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.active==e.div1,expression:"active==div1"}],ref:"con1"},[n("van-sticky",{attrs:{container:e.con1,"offset-top":46}},[n("div",{staticClass:"topDiv"},[e._v(e._s(e.$t("选择任务")))])]),n("div",e._l(e.TaskList,(function(t,a){return n("div",{key:a,class:a==e.BeClickTask?"divLineBeClick":"divLine",on:{click:function(t){return e.TaskClick(a)}}},[n("p",{staticClass:"alineL"},[e._v(e._s(t.no))]),n("p",{staticClass:"alineL"},[e._v(e._s(t.WarehouseName))]),n("p",{staticClass:"alineL"},[e._v(e._s(t.date))]),n("p",{staticClass:"alineL"},[e._v(e._s(t.state))])])})),0)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.active==e.div2,expression:"active==div2"}],ref:"con2"},[n("van-sticky",{attrs:{container:e.con2,"offset-top":46}},[n("div",{staticClass:"topDiv"},[e._v(" "+e._s(e.$t("任务"))+"："+e._s(this.TaskNum)+" "),n("br"),e._v(" "+e._s(e.$t("仓库")+":"+e.HouseNum)+" ")])]),n("div",[n("van-tabs",{staticClass:"TabHeight",attrs:{color:"#4284f4"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[n("van-tab",{attrs:{title:e.$t("操作")}},[n("ScanInput",{directives:[{name:"show",rawName:"v-show",value:e.isShowScan,expression:"isShowScan"}],attrs:{label:e.$t("物料条码")},on:{submit:e.m_scanner_OnScannerReaded}}),n("MessageBox",{ref:"messageBox",staticClass:"lonelyMeg"}),n("InputCell",{attrs:{title:e.$t("物料条码"),value:e.txtReelBarcode},on:{"update:value":function(t){e.txtReelBarcode=t}}}),n("Cell",{attrs:{title:e.$t("物料编号"),value:e.PartNumber}}),n("Cell",{attrs:{title:e.$t("标包数量"),value:e.PackageQuantity}}),n("InputEditCell",{attrs:{title:e.$t("剩余数量"),value:e.RemainQty,type:"number"},on:{"update:value":function(t){e.RemainQty=t}}}),n("van-button",{staticStyle:{width:"calc(100vw - 30px)",margin:"10px 0 0 15px"},attrs:{type:"info"},on:{click:e.nextTask}},[e._v(e._s(e.$t("确定")))])],1),n("van-tab",{attrs:{title:e.$t("记录")}},[n("el-table",{attrs:{data:e.ListViewItem,"highlight-current-row":"",size:"mini"}},[n("el-table-column",{attrs:{prop:"ReelId",label:e.$t("物料条码"),"min-width":"30%"}}),n("el-table-column",{attrs:{prop:"SystemQuantity",label:e.$t("剩余数量"),"min-width":"30%"}}),n("el-table-column",{attrs:{prop:"ActualQuantity",label:e.$t("盘点数量"),"min-width":"30%"}})],1)],1)],1)],1)],1),n("van-button",{staticClass:"BtnButton",staticStyle:{width:"40vw",left:"5vw"},attrs:{type:"info"},on:{click:e.btnReturn_Click}},[e._v(e._s(e.$t("Return")))]),n("van-button",{directives:[{name:"show",rawName:"v-show",value:0==e.active,expression:"active == 0"}],staticClass:"BtnButton",staticStyle:{width:"40vw",left:"54vw"},attrs:{type:"info"},on:{click:e.btnNext_Click}},[e._v(e._s(e.$t("Next")))])],1)},s=[],i=(n("8601"),n("cc16"),n("bc4a"),n("e967"),n("85a2"),n("6a61"),n("2e91")),r=(n("dbc0"),n("d697")),u=(n("1f03"),n("ed96")),c=(n("7fd6"),n("f6ab")),o=(n("4910"),n("b3da")),l=n("a593"),d=n("9973"),v=n("b1ea"),f=n("b7bd"),m=n("6168"),h=n("bda9"),p=n("6255"),k=n("521f"),b=n("9073"),y=n("5c5a"),w=n("caaf"),g=n.n(w);l["default"].use(p["Table"]),l["default"].use(p["Pagination"]),l["default"].use(o["a"]),l["default"].use(c["a"]),l["default"].use(u["a"]),l["default"].use(r["a"]);var x={components:{Page:d["a"],MessageBox:k["a"],Cell:v["a"],ScanInput:m["a"],InputCell:f["a"],InputEditCell:h["a"]},computed:{},data:function(){return{isShowScan:!1,ListViewItem:[],BeClickTask:-1,active:0,div1:0,div2:1,HouseNum:"",TaskList:[],currentTask:null,con1:null,con2:null,activeTab:0,PartNumber:"",PackageQuantity:"",RemainQty:0,BathcNo:"",TaskNum:"",CurrentReelId:"",checkInventoryTemp:null,m_partInventory:null,txtReelBarcode:""}},mounted:function(){this.LoadWorkorders(),this.con1=this.$refs.con1,this.con2=this.$refs.con2},methods:{showMessage:function(e){this.$refs.messageBox.showMessage(e)},TaskClick:function(e){this.BeClickTask=e;var t=this.TaskList[e].no;this.TaskNum=t,this.HouseNum=this.TaskList[e].WarehouseName,this.currentTask=this.TaskList[e]},btnNext_Click:function(){if(0==this.active){if(""!=this.TaskNum){var e="Task:"+this.TaskNum;return e+="\r\n Area:"+this.HouseNum,this.showMessage(e),void(this.active=1)}Object(r["a"])(this.$t("请选择任务"))}},btnReturn_Click:function(){0==this.active?this.$router.go(-1):1==this.active&&(this.active=0)},nextTask:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,(e.txtReelBarcode.length<=0||null==e.m_partInventory)&&e.showMessage(e.$t("请扫描料盘条码ReelID!")),t.next=4,b["s"](e.currentTask.Id,e.checkInventoryTemp.InventoryReelId,e.RemainQty);case 4:n=t.sent,n&&(e.checkInventoryTemp=n,a="Check Qty："+e.checkInventoryTemp.ActualQuantity,a+="\r\n"+e.$t("{0}盘点完成！",[e.txtReelBarcode]),e.showMessage(a),e.txtReelBarcode="",e.RemainQty="",e.ListViewItem.push({ReelId:e.txtReelBarcode,SystemQuantity:e.checkInventoryTemp.SystemQuantity,ActualQuantity:e.checkInventoryTemp.ActualQuantity}),e.checkInventoryTemp=null,e.m_partInventory=null,e.Reset()),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),e.showMessage(t.t0),e.m_partInventory=null;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},LoadWorkorders:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.ListViewItem=[],t.next=4,b["g"](null,{});case 4:if(n=t.sent,n){t.next=7;break}return t.abrupt("return");case 7:n.Items.forEach((function(t){var n={};n.no=t.TaskName,n.date=g()(t.CreatedTime).format("YYYY-MM-DD HH:mm"),n.state=t.FirstCheckStatusName,n.tag=t,n.WarehouseName=t.WarehouseName,n.Id=t.Id,e.TaskList.push(n)})),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$refs.messageBox.showMessage(e.$t("加载任务出错")+t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},m_scanner_OnScannerReaded:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(-1==e.indexOf("*")){n.next=7;break}if(e=Object(y["f"])(e),e){n.next=7;break}return t.showMessage(t.$t("条码格式不正确")),n.abrupt("return");case 7:return n.next=9,b["a"]({EInventoryReelId:e,ML_CheckInventoryId:t.TaskList[t.BeClickTask].Id});case 9:if(a=n.sent,a&&a.Items&&0!=a.Items.length){n.next=13;break}return t.showMessage(t.$t("条码：{0}不存在于当前盘点任务",[e])),n.abrupt("return");case 13:t.checkInventoryTemp=a.Items[0],t.RemainQty=t.checkInventoryTemp.ActualQuantity?t.checkInventoryTemp.ActualQuantity:t.checkInventoryTemp.SystemQuantity,t.txtReelBarcode=e,t.showMessage(t.$t("ReelID:"+e)),t.DoScanReelIdCode(e);case 18:case"end":return n.stop()}}),n)})))()},DoScanReelIdCode:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,b["e"](null,{ReelId:e});case 3:if(a=n.sent,0!=a.length){n.next=8;break}return t.showMessage(e+t.$t("不存在")),t.Reset(),n.abrupt("return");case 8:t.m_partInventory=a[0],t.PartNumber=t.m_partInventory.PartNumber,t.PackageQuantity=t.m_partInventory.InitialQty.toString(),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](0),t.showMessage(t.$t("加载盘点数据出错！")+n.t0),t.Reset();case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},Reset:function(){this.txtReelBarcode="",this.PartNumber="",this.PackageQuantity="",this.RemainQty=""}}},_=x,I=(n("93d4"),n("2768"),n("5d22")),T=Object(I["a"])(_,a,s,!1,null,null,null);t["default"]=T.exports},b1ea:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-cell",{staticClass:"cellAll",scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"custom-title"},[e._v(e._s(e.title))]),n("div",{staticClass:"custom-detail"},[e._v(e._s(e.value))])]},proxy:!0}])})},s=[],i={props:{title:{type:String,require:!1,default:"标题"},value:{require:!1,default:""}},data:function(){return{messages:"",count:0}},methods:{}},r=i,u=(n("4176"),n("5d22")),c=Object(u["a"])(r,a,s,!1,null,null,null);t["a"]=c.exports},b4a7:function(e,t,n){"use strict";n("c276")},b7bd:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-cell",{staticClass:"cellAll",scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"custom-title"},[e._v(e._s(e.title))]),n("van-field",{staticClass:"filed",attrs:{autosize:"",type:e.type,clearable:""},on:{input:e.onInput,focus:e.fieldFocus,blur:e.fieldBlur},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-icon",{attrs:{name:"scan",size:"20",color:"#4284f4"}})]},proxy:!0}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]},proxy:!0}])})},s=[],i={props:{title:{type:String,require:!1,default:"标题"},value:{require:!1,default:""},type:{type:String,require:!1,default:"textarea"}},methods:{onInput:function(e){this.value=e,this.$emit("update:value",e)},GetVal:function(){return this.value},fieldBlur:function(){window.scroll(0,this.FoucusS),window.onresize=function(){}},fieldFocus:function(){this.FoucusS=document.documentElement.scrollTop-40,window.onresize=function(){return function(){var e=document.body.clientHeight;window.scroll(0,e)}()}}}},r=i,u=(n("54ca"),n("5d22")),c=Object(u["a"])(r,a,s,!1,null,null,null);t["a"]=c.exports},bda9:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-cell",{staticClass:"cellAll",scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"custom-title"},[e._v(e._s(e.title))]),n("van-field",{staticClass:"filed",attrs:{clearable:"",type:e.type},on:{input:e.onInput,focus:e.fieldFocus,blur:e.fieldBlur},scopedSlots:e._u([{key:"right-icon",fn:function(){return[n("van-icon",{attrs:{name:"edit",size:"20",color:"#4284f4"}})]},proxy:!0}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]},proxy:!0}])})},s=[],i={props:{title:{type:String,require:!1,default:"标题"},value:{require:!1,default:""},type:{type:String,require:!1,default:"text"}},methods:{onInput:function(e){this.value=e,this.$emit("update:value",e)},GetVal:function(){return this.value},fieldBlur:function(){window.scroll(0,this.FoucusS),window.onresize=function(){}},fieldFocus:function(){this.FoucusS=document.documentElement.scrollTop-40,window.onresize=function(){return function(){var e=document.body.clientHeight;window.scroll(0,e)}()}}}},r=i,u=(n("b4a7"),n("5d22")),c=Object(u["a"])(r,a,s,!1,null,null,null);t["a"]=c.exports},c276:function(e,t,n){}}]);